function getLocalStorageValue(a){if("undefined"!=typeof Storage){var b=localStorage.getItem(a),c=Math.round(Date.now()/1e3);try{b=JSON.parse(b)}catch(a){}if(b&&b.expire>c)return b.data}return!1}function setLocalStorageValue(a,b,c){if("undefined"!=typeof Storage){if(void 0==c||"null"==c)var c=7200;var d=new Date,e=Math.round(d.setSeconds(d.getSeconds()+c)/1e3),f={expire:e,data:b};try{f=JSON.stringify(f)}catch(a){}localStorage.setItem(a,f)}}function convertTimestamp(a){var b=new Date(1e3*a),c=b.getFullYear(),d=("0"+(b.getMonth()+1)).slice(-2),e=("0"+b.getDate()).slice(-2),f=b.getHours(),g=f,h=("0"+b.getMinutes()).slice(-2),i="AM";return f>12?(g=f-12,i="PM"):12===f?(g=12,i="PM"):0==f&&(g=12),e+"/"+d+"/"+c+", "+g+":"+h+" "+i}function setVCookie(a,b,c){c||(c=31536e6);var d=new Date;d.setTime(d.getTime()+c),document.cookie=a+"="+b+"; path=/; expires="+d.toUTCString()}function getVCookie(a){var b=document.cookie.match("(^|;) ?"+a+"=([^;]*)(;|$)");return b?b[2]:null}function cookieOnceDay(a){var b=getVCookie(a);if(null!=b&&""!=b){var c=new Date(b).getDate();return(new Date).getDate()>c}return!0}function mPopup(a){var b="popupnotice_"+(new Date).getTime();return $("body").append('<div class="'+b+' mvpopup-popup tn-popup-in" style="display: none"><div class="tn-popup-title clearfix">'+a.title+'</div><a href="javascript:void(0)" class="closenotice fa fa-times"></a><div class="tn-popup-txt clearfix">'+a.msg+'</div><div class="tn-popup-bot"></div> </div>'),b="."+b,$(b+" .closenotice").bind("click",function(){$(b).remove()}),"top left"==a.position?$(b+".mvpopup-popup").css({top:10,left:10}).fadeIn("fast"):"top center"==a.position?$(b+".mvpopup-popup").css({top:10,left:($(window).width()-$(b).width())/2}).fadeIn("fast"):"top right"==a.position?$(b+".mvpopup-popup").css({top:10,right:10}).fadeIn("fast"):"bottom left"==a.position?$(b+".mvpopup-popup").css({bottom:10,left:10}).fadeIn("fast"):"bottom center"==a.position?$(b+".mvpopup-popup").css({bottom:10,left:($(window).width()-$(b).width())/2}).fadeIn("fast"):"bottom right"==a.position?$(b+".mvpopup-popup").css({bottom:10,right:10}).fadeIn("fast"):$(b+".mvpopup-popup").css({top:($(window).height()-$(b).height())/2,left:($(window).width()-$(b).width())/2}).fadeIn("fast"),b}function viewYT(a){a&&($("body").append('<div id="trailer-popup" class="tn-popup-in box-logreg" style="display:none;"><div class="tn-popup-txt clearfix"><a href="javascript:void(0)" class="tn-trailer-close"><i class="fa fa-times"></i></a><div id="trailer_player" style="width:700px;height:400px;"><iframe src="http://www.youtube.com/embed/'+a+'?autoplay=1&vq=hd720" frameborder="0" allowfullscreen width="700px" height="400px"></iframe></div></div></div>'),$("#trailer-popup .tn-trailer-close").unbind("click"),$("#trailer-popup .tn-trailer-close").bind("click",function(){$("#trailer-popup").remove(),$(".malert-bg-popup").fadeOut()}),$("#trailer-popup").css({top:($(window).height()-$("#trailer-popup").height())/2,left:($(window).width()-$("#trailer-popup").width())/2}).fadeIn("fast"),$(".malert-bg-popup").fadeIn())}function mNotice(a){var b="noticetip_"+(new Date).getTime();$("body").append('<div class="'+b+' notice-episode" style="display: none"><a href="javascript:void(0)" class="closenotice fa fa-times"></a><span class="content">'+a.msg+"</span></div>"),b="."+b,$(b).fadeIn("fast"),$(b+" .closenotice").bind("click",function(){$(b).remove()}),a.time&&setTimeout(function(){$(b).fadeOut("fast").remove()},1e3*a.time)}function mLoading(a,b){var c="loadingmess_"+(new Date).getTime();if(b&&""!=b){var d={lines:13,length:20,width:10,radius:25,scale:1,corners:1,color:"#73d32d",opacity:.5,rotate:0,direction:1,speed:1,trail:60,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"},e=new Spinner(d).spin();$(b).css("position","relative"),$(b).append('<div id="'+c+'" style="  z-index: 10;display:none;width: 100%;height: 100%;position: absolute; text-align: center;top: 0px;"></div>'),$(b+" #"+c).append(e.el).fadeIn(),c="#"+c}else{var f='<div class="'+c+' malert-popup tn-popup-in" style="display: none"><div class="tn-popup-txt clearfix"></div><div class="tn-popup-bot"></div> </div><div class="'+c+' malert-bg-popup" style="display: block"></div>';c="."+c,$("body").append(f),$(c+" .tn-popup-txt").html(a),$(c+".malert-popup").css({top:($(window).height()-$(c).height())/2,left:($(window).width()-$(c).width())/2}).fadeIn("fast")}return c}function mAlert(a,b){var c="alert_"+(new Date).getTime();if(b&&""!=b){var d=$(b);d.append("<div id="+c+' class="malert-popup tn-popup-in has_object" style="display: none;position: absolute;"><div class="tn-popup-txt clearfix" style="display:block !important"></div><div class="tn-popup-bot"><a href="javascript:void(0);" style="display:inline-block !important" class="tn-alert-close tn-popup-in-close">Đồng ý</a></div> </div>')}else{var d=$(window);$("body").append("<div id="+c+' class="malert-popup tn-popup-in" style="display: none"><div class="tn-popup-txt clearfix" style="display:block !important"></div><div class="tn-popup-bot"><a href="javascript:void(0);" style="display:block !important" class="tn-alert-close tn-popup-in-close">Đồng ý</a></div> </div>'),$(".malert-bg-popup").fadeIn()}c="#"+c,$(c+" .tn-popup-bot .tn-alert-close").unbind("click"),$(c+" .tn-popup-bot .tn-alert-close").bind("click",function(){$(".malert-bg-popup").fadeOut(),$("#msgSpace").fadeOut(),$(c).remove()}),$(c+" .tn-popup-txt").html(a),$(c).css({top:(d.height()-$(c).height())/2,left:(d.width()-$(c).width())/2}).show()}function mConfirm(a){var b="confirm_"+(new Date).getTime();if(a.target&&""!=a.target){var c=$(a.target);c.append("<div id="+b+' class="mconfirm-popup tn-popup-in has_object" style="display: none;"><div class="tn-popup-txt clearfix"></div><div class="tn-popup-bot"><a href="javascript:void(0);" class="tn-confirm-yes tn-popup-in-close"></a><a href="javascript:void(0);" class="tn-confirm-no tn-popup-in-close"></a></div> </div>')}else{var c=$(window);$("body").append("<div id="+b+' class="mconfirm-popup tn-popup-in" style="display: none"><div class="tn-popup-txt clearfix"></div><div class="tn-popup-bot"><a href="javascript:void(0);" class="tn-confirm-yes tn-popup-in-close"></a><a href="javascript:void(0);" class="tn-confirm-no tn-popup-in-close"></a></div> </div>'),$(".malert-bg-popup").fadeIn()}b="#"+b,$(b+" .tn-popup-txt").html(a.msg),$(b+" .tn-popup-bot .tn-confirm-yes").html(a.mYes.text?a.mYes.text:"Có").unbind("click"),$(b+" .tn-popup-bot .tn-confirm-no").html(a.mNo.text?a.mNo.text:"Không").unbind("click"),$(b+" .tn-popup-bot .tn-confirm-yes").bind("click",function(){$(".malert-bg-popup").fadeOut(),$(b).remove(),a.mYes.callback&&a.mYes.callback()}),$(b+" .tn-popup-bot .tn-confirm-no").bind("click",function(){$(".malert-bg-popup").fadeOut(),$(b).remove(),a.mNo.callback&&a.mNo.callback()}),$(b).css({top:(c.height()-$(b).height())/2,left:(c.width()-$(b).width())/2}).show()}function submitLogin(){var a=mLoading("Hệ thống đang xử lý đăng nhập. Xin chờ trong giây lát.");$.ajax({type:"POST",cache:!1,url:HDOCONFIG.urlLogin,cache:!1,dataType:"json",data:{username:$("#inputEmail3").val(),password:$("#inputPassword3").val(),expire:$("#expire").is(":checked")?1:0,captcha:$("#login_captcha").val(),captchaid:$("#idcaptchalogin").val(),token:$("#login_token").val()},success:function(b){if(0==b.success){var c="";$.each(b.error,function(a,b){c+=b+"<br/>"}),mAlert(c),b.captcha&&($("#idcaptchalogin").val(b.captcha.idcaptcha),$("#imgcaptchalogin").attr("src",b.captcha.captchaimg),$("#login_token").val(b.reloadToken),$("#div-login-captcha").show())}else $(".tn-bg-popup").hide(),$("#show_pp_logreg").hide(),location.reload();$(a).remove()},error:function(){$(a).remove(),mAlert("Hệ thống đang lỗi. Xin thử lại sau")}})}function submitRegister(){var a=mLoading("Hệ thống đang xử lý đăng ký. Xin chờ trong giây lát.");return $.ajax({type:"POST",cache:!1,url:HDOCONFIG.urlRegister,cache:!1,dataType:"json",data:{username:$("#register_username").val(),password:$("#register_password").val(),confirm:$("#register_comfirm").val(),email:$("#register_email").val(),captcha:$("#register_captcha").val(),captchaid:$("#idcaptchareg").val(),token:$("#register_token").val()},success:function(b){if(0==b.success){mAlert(b.error),b.captcha&&($("#idcaptchareg").val(b.captcha.idcaptcha),$("#imgcaptchareg").attr("src",b.captcha.captchaimg))}else $(".tn-bg-popup").hide(),$("#show_pp_logreg").hide(),location.reload();$(a).remove()},error:function(){$(a).remove(),mAlert("Hệ thống đang lỗi. Xin thử lại sau")}}),!1}function openLogin(){$(".tn-bg-popup").show(),$("#show_pp_logreg").show()}function buildTooltip(){$(".jt").cluetip({cluetipClass:"jtip",attribute:"data-jtip",local:!0,arrows:!0,dropShadow:!0,hoverIntent:!0,sticky:!0,topOffset:10,mouseOutClose:"both",delayedClose:100,cluezIndex:499,width:280,arrowPixelAdded:185,closePosition:"title"})}function buildScroll(){$("#scrollVideoHome .showMovie").length>0&&$("#scrollVideoHome .showMovie").carouFredSel({auto:!1,responsive:!0,width:"100%",prev:"#videohome-prev",next:"#videohome-next",swipe:{onTouch:!0,onMouse:!0},items:{width:220,visible:{min:3,max:8}}}),$("#scrollPhimLe .showMovie").length>0&&$("#scrollPhimLe .showMovie").carouFredSel({auto:!1,responsive:!0,width:"100%",prev:"#phimlemoi-prev",next:"#phimlemoi-next",swipe:{onTouch:!0,onMouse:!0},items:{width:220,visible:{min:3,max:8}}}),$("#scrollPhimBo .showMovie").length>0&&$("#scrollPhimBo .showMovie").carouFredSel({auto:!1,responsive:!0,width:"100%",prev:"#phimbomoi-prev",next:"#phimbomoi-next",swipe:{onTouch:!0,onMouse:!0},items:{width:220,visible:{min:3,max:8}}}),$("#scrollPhimTop .showMovie").length>0&&$("#scrollPhimTop .showMovie").carouFredSel({auto:!1,responsive:!0,width:"100%",prev:"#tophdo-prev",next:"#tophdo-next",items:{width:220,visible:{min:3,max:8}}}),$("#scrollPhimLike .showMovie").length>0&&$("#scrollPhimLike .showMovie").carouFredSel({auto:!1,responsive:!0,width:"100%",prev:"#likes-prev",next:"#likes-next",items:{width:220,visible:{min:3,max:8}}}),$("#scrollPhimComment .showMovie").length>0&&$("#scrollPhimComment .showMovie").carouFredSel({auto:!1,responsive:!0,width:"100%",prev:"#comments-prev",next:"#comments-next",items:{width:220,visible:{min:3,max:8}}}),$("#scrollPhimRecommend .showMovie").length>0&&$("#scrollPhimRecommend .showMovie").carouFredSel({auto:!1,responsive:!0,width:"100%",prev:"#recommend-prev",next:"#recommend-next",items:{width:220,visible:{min:3,max:8}}}),$("#scrollPhimRand .showMovie").length>0&&$("#scrollPhimRand .showMovie").carouFredSel({auto:!1,responsive:!0,width:"100%",prev:"#rand-prev",next:"#rand-next",items:{width:220,visible:{min:3,max:8}}}),$("#scrollPhimSubscribe .showMovie").length>0&&$("#scrollPhimSubscribe .showMovie").carouFredSel({auto:!1,responsive:!0,width:"100%",prev:"#subscribe-prev",next:"#subscribe-next",items:{width:220,visible:{min:3,max:8}}}),$("#scrollPhimValentime .showMovie").length>0&&$("#scrollPhimValentime .showMovie").carouFredSel({auto:!1,responsive:!0,width:"100%",prev:"#valentime-prev",next:"#valentime-next",scroll:{duration:700,pauseOnHover:!0},items:{width:220,visible:{min:3,max:8}}}),$("#scrollPhimAnime .showMovie").length>0&&$("#scrollPhimAnime .showMovie").carouFredSel({auto:!1,responsive:!0,width:"100%",prev:"#anime-prev",next:"#anime-next",scroll:{duration:700,pauseOnHover:!0},items:{width:220,visible:{min:3,max:8}}}),$("#scrollPhimHotHome .showMovie").length>0&&$("#scrollPhimHotHome .showMovie").carouFredSel({auto:!0,responsive:!0,width:"100%",prev:"#hothome-prev",next:"#hothome-next",scroll:{items:3,duration:700,pauseOnHover:!0},items:{width:220,visible:{min:3,max:8}}}),$("#cat_moinhat").length>0&&$("#cat_moinhat").carouFredSel({auto:!1,responsive:!0,width:"100%",prev:"#cat_moinhat-prev",next:"#cat_moinhat-next",items:{width:220,visible:{min:3,max:8}}}),$("#cat_tophdo").length>0&&$("#cat_tophdo").carouFredSel({auto:!1,responsive:!0,width:"100%",prev:"#cat_tophdo-prev",next:"#cat_tophdo-next",items:{width:220,visible:{min:3,max:8}}}),$("#cat_random").length>0&&$("#cat_random").carouFredSel({auto:!1,responsive:!0,width:"100%",prev:"#cat_random-prev",next:"#cat_random-next",items:{width:220,visible:{min:3,max:8}}})}function showContact(){$("#contact-popup").css({marginTop:($(window).height()-$("#contact-popup").outerHeight())/2}),$("#contact-popup").fadeIn("fast")}function showContactAds(){$("#ads-popup").css({marginTop:($(window).height()-$("#ads-popup").outerHeight())/2}),$("#ads-popup").fadeIn("fast")}function sendContact(){var a=$("#contact-popup #contactContent").val(),b=$("#contact-popup #contactEmail").val(),c=$("#contact-popup #contactPhone").val(),d=$("#contact-popup #contactName").val();return""==d?(mAlert("Bạn chưa nhập Tên"),$("#contact-popup #contactName").focus(),!1):""==c?(mAlert("Bạn chưa nhập Phone"),$("#contact-popup #contactPhone").focus(),!1):""==b?(mAlert("Bạn chưa nhập email"),$("#contact-popup #contactEmail").focus(),!1):""==a?(mAlert("Bạn chưa nhập nội dung"),!1):void $.ajax({url:HDOCONFIG.urlContact,dataType:"json",type:"POST",data:{email:b,content:a,url:window.location.href,phone:c,name:d}}).done(function(a){1==a.success?(mAlert("Thanks you for contact, we will reply within 7 days."),$("#contact-popup").fadeOut()):mAlert(a.msg)}).fail(function(a){mAlert("Có lỗi xảy ra. Xin thử lại")})}function detectmob(){if(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)){if(1==confirm("Website chưa hỗ trợ trên thiết bị mobile ở trang này. Bạn muốn truy cập vào trang mobile http://m.hdonline.vn không?")){var a=document.createElement("a");a.href=window.location.href;var b=a.protocol+"//m.hdonline.vn"+a.pathname;window.location.href=b}}else{var c=!1;try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash")&&(c=!0)}catch(a){navigator.mimeTypes&&void 0!=navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(c=!0)}0==c&&alert("Bạn chưa cài đặt Flash Player. Bạn không thể xem phim được.")}}function setLikeCount(a,b){void 0==b&&(b=!0),$.ajax({type:"GET",cache:!1,url:HDOCONFIG.urlLikePlus,data:{film:a,plus:b}})}function setCommentCount(a,b){void 0==b&&(b=!0),$.ajax({type:"GET",cache:!1,url:HDOCONFIG.urlCommentPlus,data:{film:a,plus:b}})}function sendPlusCount(a){var b=!1;"on"==a.state&&(b=!0),void 0!=PlayFilm&&setLikeCount(PlayFilm,b)}function buildLoginLink(a){var b=window.location.href;if(b=a+"?rel="+b,b.indexOf("dang-nhap")>-1)var d=(window.open(b,"authLoginWindow","width=500,height=500,top=10,left="+($(window).width()-500)/2),window.setInterval(function(){try{null!=getVCookie("checkUser")&&(window.clearInterval(d),$.ajax({url:HDOCONFIG.urlLoginSSO,type:"GET",cache:!1}).done(function(a){window.location.reload(!0)}).fail(function(a){window.location.reload(!0)}))}catch(a){}},1e3));else a.indexOf("logout")>-1?$.ajax({url:a,type:"POST",cache:!1}).done(function(a){window.location.reload(!0)}).fail(function(a){window.location.reload(!0)}):window.location.href=b}function hdoTrackEvent(a,b,c){ga("send","event",a,b,c)}function setLater(a,b){return $.ajax({url:HDOCONFIG.urlLater,dataType:"json",type:"GET",cache:!1,data:{film:a}}).done(function(a){0==a.success?0==isLogin?openLogin():mAlert(a.msg):1==a.add&&void 0!=b?$(b).addClass("active"):1==a.remove&&void 0!=b?$(b).removeClass("active"):mAlert(a.msg)}).fail(function(a){mAlert("Có lỗi xảy ra. Xin thử lại")}),!1}function setLike(a,b,c){return $.ajax({url:HDOCONFIG.urlLike,dataType:"json",type:"GET",cache:!1,data:{film:a}}).done(function(a){0==a.success?1!=c&&(0==isLogin?openLogin():mAlert(a.msg)):1==a.add&&void 0!=b?$(b).addClass("active"):1==a.remove&&void 0!=b?$(b).removeClass("active"):mAlert(a.msg)}).fail(function(a){mAlert("Có lỗi xảy ra. Xin thử lại")}),!1}function setSubscribe(a,b,c,d){return 0==b&&1==c?void mAlert('Chức năng quan tâm "PHIM LẺ" chỉ áp dụng cho các phim CAM, SD và thông báo khi cập nhật phim HD mới.'):($.ajax({url:HDOCONFIG.urlSubscribe,dataType:"json",type:"GET",cache:!1,data:{film:a,ftype:b}}).done(function(a){0==a.success?0==isLogin?openLogin():mAlert(a.msg):1==a.add&&void 0!=d?$(d).addClass("active"):1==a.remove&&void 0!=d?$(d).removeClass("active"):mAlert(a.msg)}).fail(function(a){mAlert("Có lỗi xảy ra. Xin thử lại")}),!1)}function addToWatchList(a,b,c){if(c||(c=1),isLogin){var d="http://api.hdonline.vn/v2/index/trackview?uid="+userID+"&fid="+a+"&ep="+c,e=new Image;e.src=d,e.loaded=function(){e=null};var g={uid:userID,fid:a,ep:c};$.ajax({url:"http://hdo.tranvu.info/trackview.php",dataType:"json",type:"GET",cache:!1,data:g}).done(function(a){a.success&&b(!0)}).fail(function(a){b(!1)})}else b(!1)}function removeWathcList(a,b){var d={uid:userID,fid:a};$.ajax({url:"http://hdo.tranvu.info/deleteview.php",dataType:"json",type:"GET",cache:!1,data:d}).done(function(a){try{mAlert(a.msg)}catch(a){mAlert("Có lỗi xảy ra. Xin thử lại")}a.success&&b(!0)}).fail(function(a){mAlert("Có lỗi xảy ra. Xin thử lại")})}function checkHeightScorll(){$(window).width()<900&&$(".caroufredsel_wrapper").each(function(a){var b=$(this).find("li").first().outerHeight();$(this).height(b),$(this).find("ul").first().height(b)})}function HDOkeyHandler(a){27==a.keyCode?(callCloseMovieView(),a.preventDefault()):17==a.keyCode&&(hasCtrlBtn=!0)}function getCaptcha(a){$.ajax({url:HDOCONFIG.refreshCaptcha,cache:!1,dataType:"json",success:function(b){a(b)}})}function showPoupRegister(){return $(".box-login-popup-new").hide(),$("#show_pp_logregister").fadeIn(),getCaptcha(function(a){$("#idcaptchareg").val(a.idcaptcha),$("#imgcaptchareg").attr("src",a.captchaimg)}),!1}function DoubleLoginAccount(){}function checkRememberMe(){var a=unescape(getVCookie("UserName")),b=unescape(getVCookie("UserPass"));null!=a&&null!=b&&"null"!=a&&"null"!=b&&($("#inputEmail3").val(a),$("#inputPassword3").val("datacookie_"+b),$("#expire").attr("checked","checked"))}function callCloseMovieView(){try{"undefined"==typeof isMovieDetailPage&&jwplayer("hdoplayer").remove()}catch(a){}try{jwplayer(jwPlayerVideo).remove()}catch(a){}$(".movieview").remove(),$(".movie-bg-popup").fadeOut(),$(".screenshotview, .movie-screens-bg").fadeOut(),""!=oldPath&&(sendURL(oldPath),document.title=oldTitle)}function callSaveLike(a){void 0!=PlayFilm&&(setLikeCount(PlayFilm,!0),setLike(PlayFilm,".btn-likes-movie",!0))}function checkHoverExist(){1==isOnMouseNext&&$(".tn-bannersld").cycle("next")}function buildInstantSearch(){$("#tn-searchtop").click(function(){$("#searchtop-input").focus()}),$("#searchtop-close").click(function(){$("#searchtop-input").val(""),$(".tn-searchtop").hide()}),$("#searchtop-input").keyup(function(a){if(13==a.which)if(linkSearchSelect&&""!=linkSearchSelect)window.location.href=linkSearchSelect;else{var b=$("#searchtop-input").val();if(""!=b){var c=convert_non_mark(b);c=c.replace(/[`~!@#$%^&*()_|+\=?;:'",.<>\{\}\[\]\\\/]/gi,""),c=c.split(" ").join("-").toLowerCase().trim(),window.location.href=BASE_URL+"/tim-kiem/"+c+".html"}}}),$("#searchtop-input").autocomplete({select:function(a,b){linkSearchSelect=b.item.link},source:function(a,b){var c=$("#searchtop-input").val();c=c.replace(/(<([^>]+)>)/gi,"");var d=convert_non_mark(c);d=d.replace(/[`~!@#$%^&*()_|+\=?;:'",.<>\{\}\[\]\\\/]/gi,""),d=d.toLowerCase().trim();var e=d.split(" ").join("-");e="/tim-kiem/"+e+".html";var f=new Array,g=new Array,h=0;$.get("http://210.245.125.60:8983/solr/hdonline/suggest_movie",{q:c},function(a){a=$.parseJSON(a),a.response&&(a=a.response);jQuery.isEmptyObject(a)||0==a.numFound?(f.push({link:e,imgsrc:"",label:"Enter để tìm kiếm",label_en:"",type:"no-result"}),b(f)):($.each(a.docs,function(a,b){var c=b.doc_id.trim().split("_");if("FILM"==c[0])f.length<=5&&f.push({link:BASE_URL+"/phim-"+b.slug+"-"+c[1]+".html",imgsrc:SERVER_IMG+$.parseJSON(b.thumb)[5],label:b.name_vn,label_en:b.name_en,type:"film"}),h++;else if("PEOPLE"==c[0]&&g.length<=5){var d=CDN_URL+"/default_images/215x215.jpg";null!=b.people_thumb&&""!=b.people_thumb&&(d=b.people_thumb,-1==d.indexOf("http://")&&(d=SERVER_IMG+d),d=d.replace("http://i.hdonline.vn/","http://hdonline.vn/i/")),g.push({link:BASE_URL+"/phim-"+b.slug+".html",imgsrc:d,label:b.name_people,label_en:"",type:"people"})}}),f=f.concat(g),h>5?f.push({link:e,imgsrc:"",label:"",label_en:"",type:"film"}):0==f.length&&f.push({link:e,imgsrc:"",label:"Enter để tìm kiếm",label_en:"",type:"no-result"}),b(f),$(".ui-autocomplete li a span").dotdotdot())})}}).data("ui-autocomplete")._renderItem=function(a,b){var c="";return c=""!=b.imgsrc?"<a href='"+b.link+"'><img onError=\"this.onerror=null;this.src='"+CDN_URL+"/default_images/215x215.jpg';\" src='"+b.imgsrc+"' /><span>"+b.label+"</br><i>"+b.label_en+"</i></span></a>":""==b.imgsrc&&""==b.label?"<a class='btn btn-primary btn-sm' style='margin-left: 70px;' href='"+b.link+"'>Xem Thêm</a>":"<a href='"+b.link+"'><span>"+b.label+"</span></a>",$("<li class='"+b.type+"'></li>").data("item.autocomplete",b).append(c).appendTo(a)}}function handleBannerSlideEvent(){$("#bannersld-next").hover(function(){0==checkEventNext&&$(".tn-bannersld").cycle("next")},function(){checkEventNext=!1,isOnMouseNext=!1}),$("#bannersld-prev").hover(function(){},function(){checkEventPrev=!1,isOnMousePrev=!1}),$(".tn-bannersld .bannersld-in").hover(function(){$(this).find(".bannersld-info").css("right","0px")},function(){$(this).find(".bannersld-info").css("right","-350px")}),$(".tn-bannersld").on("cycle-after",function(a,b){(isOnMouseNext||isOnMousePrev)&&$(this).find(".cycle-slide-active").find(".bannersld-info").css("right","0px")}),$(".tn-bannersld").on("cycle-before",function(a,b){$(this).find(".cycle-slide-active").find(".bannersld-info").css("right","-350px")}),$(".tn-bannersld").on("cycle-next",function(a,b){checkEventNext=!0,isOnMouseNext=!0,clearTimeout(intCheckTimeoutLoad),intCheckTimeoutLoad=setTimeout(function(){checkEventNext=!1,checkHoverExist()},4*b.speed)}),$(".tn-bannersld").on("cycle-prev",function(a,b){checkEventPrev=!0,isOnMousePrev=!0,clearTimeout(intCheckTimeoutLoad),setTimeout(function(){checkEventPrev=!1,checkHoverExist()},4*b.speed)})}var checkEventNext=!1,isOnMouseNext=!1,checkEventPrev=!1,isOnMousePrev=!1,intCheckTimeoutLoad,linkSearchSelect;$(document).ready(function(a){buildTooltip(),buildScroll(),buildInstantSearch(),handleBannerSlideEvent(),$(".tabMovie a").bind("click",function(a){a.preventDefault()}),$(".tn-popup-close,.tn-bg-popup").click(function(a){$(".tn-popup-in, .tn-bg-popup").fadeOut()}),$("#login-popup-close").click(function(a){$("#show_pp_logreg").fadeOut()}),$("#registry-popup-close").click(function(a){$("#show_pp_logregister").fadeOut()}),$("#msgSpace").click(function(a){$(".malert-bg-popup, .malert-popup, #msgSpace").fadeOut(),$(".tn-alert-close").click()}),setTimeout(function(){$(".adCheckHide").length>0&&(0==$(".adCheckHide").filter(":visible").length||$(".adCheckHide").filter(":hidden").length>0)&&mAlert("Xin tắt/ loại bỏ chương trình chặn quảng cáo để trải nghiệm HDO tốt hơn.")},3e3),1==alertMobile&&1==cookieOnceDay("alertMobile")&&setVCookie("alertMobile",new Date),$(".filminfo-social a, .sharesocialbtn").click(function(){if($(this).data("sharelink")){var a=$(this).data("sharelink")+$(this).attr("href");return window.open(a,"socialWindow","width=500,height=500,top=10,left="+($(window).width()-500)/2),!1}}),$(".mobile-menu a").bind("click",function(){$(this).toggleClass("active"),$(".tn-gnav").toggle()}),$(".mobile-search a").bind("click",function(){$(this).toggleClass("active"),$("#div-search").toggle()}),$(window).bind("resize",function(){checkHeightScorll()}),setTimeout(checkHeightScorll,2e3),1==isLogin&&$(".hasUView").click(function(){var a=$(this).data("id");return $(this).hasClass("active")?removeWathcList(a,function(b){b&&$(".hasUView.movie_id_view_"+a).removeClass("active")}):addToWatchList(a,function(b){b&&$(".hasUView.movie_id_view_"+a).addClass("active")}),!1})});