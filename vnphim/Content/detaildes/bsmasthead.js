(bsmasthead=function(e){e?(this.options=e,this.init()):console.log("The options is required")}).prototype.init=function(){this.loadCss();var e=this.loadPlayer();e.onload=e.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||VAST.get(bsmasthead.options.vastURL,function(e){if(!e)return"function"==typeof window.passbackHadarPlacement&&window.passbackHadarPlacement(bsmasthead.options.placementId),void console.log("not response");bsmasthead.adResponse=e;var t=bsmasthead.adResponse.ads[0].extensions[0].attributes.type;if("mobile"===t){if(!ismobile.any)return}else{if("desktop"!==t)return void console.log('Type "'+t+'" is not supported');if(ismobile.any)return}bsmasthead.createTemplate()})}},bsmasthead.prototype.loadCss=function(){function e(e,t){if(!document.getElementById(t)){var s=document.createElement("link");s.id=t,s.href=e+"?v="+(new Date).getTime(),s.type="text/css",s.rel="stylesheet",s.media="screen,print",document.head.appendChild(s)}}var t=this.options.playerCss,s=this.options.mastheadCss;void 0!==t||t||(t="//static.hadarone.com/ajs/outstream/bsplayer.css"),void 0!==s||s||(s="//static.hadarone.com/ajs/outstream/masthead/bsmasthead.css"),e(t,"bsplayer-css"),e(s,"bsmasthead-css"),this.options.css&&this.insertCss(this.options.css)},bsmasthead.prototype.loadPlayer=function(){var e=this.options.playerJs;return void 0!==e&&e||(e="//static.hadarone.com/ajs/outstream/bsplayer.js"),function(e,t){var s,a;if(!document.getElementById(t))return s=document.createElement("script"),s.id=t,s.type="text/javascript",s.src=e+"?v="+(new Date).getTime(),(a=document.getElementsByTagName("script")[0]).parentNode.insertBefore(s,a),s}(e,"bsplayer-js")},bsmasthead.prototype.insertCss=function(e){var t=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e)),t.appendChild(s)},bsmasthead.prototype.createTemplate=function(){var e=document.getElementById("bsmasthead-wrapper");this.wrapper=e;`<div class="bsmasthead-signature">\n                    <span>Ads by <strong>Blueseed</strong></span>\n                </div>\n                <div class="bsmasthead-close-btn">×</div>\n                <div id="bsmasthead-container"></div>`;e.innerHTML='<div class="bsmasthead-signature">\n                    <span>Ads by <strong>Blueseed</strong></span>\n                </div>\n                <div class="bsmasthead-close-btn">×</div>\n                <div id="bsmasthead-container"></div>',e.querySelector(".bsmasthead-close-btn").addEventListener("click",function(){bsmasthead.destroy()}),e.querySelector(".bsmasthead-signature").addEventListener("click",function(){window.open("http://blueseed.tv","_blank")});var t=e.querySelector("#bsmasthead-container");this.container=t,ismobile.any?this.loadMastheadMobile():this.loadMastheadPc(),this.options.sticky&&this.sticky(),this.tracking()},bsmasthead.prototype.loadMastheadPc=function(){if(this.getHtmlResource()){var e=document.createElement("iframe");e.scrolling="no",e.style.width="970px",e.style.height="250px",this.container.append(e);var t=new XMLHttpRequest;t.open("GET",this.getHtmlResource(),!0),t.onreadystatechange=function(){4===this.readyState&&200===this.status&&(e.contentWindow.document.open(),e.contentWindow.document.write(this.responseText),e.contentWindow.document.close(),setTimeout(function(){bsmasthead.wrapper.style.width="970px",bsmasthead.wrapper.style.height="250px"},1e3))},t.send()}else{if(!this.getStaticResource())return void console.log("Not found resource");var s=document.createElement("img");s.setAttribute("style","width: 970px !important; height: 250px !important; max-width: 970px !important"),s.src=this.getStaticResource(),bsmasthead.wrapper.style.width="970px",bsmasthead.wrapper.style.height="250px",this.container.append(s)}try{var a=fetchVAST(this.adResponse);"string"==typeof a.fileURL&&""!==a.fileURL&&(console.log("init player"),this.handlePlayerOnPC())}catch(e){}},bsmasthead.prototype.loadMastheadMobile=function(){function e(){var e=parseInt(window.getComputedStyle(bsmasthead.wrapper).getPropertyValue("width"),10);t.style.width=e+"px",t.style.height=e/2+"px",bsmasthead.wrapper.style.height=e/2+"px"}if(this.getHtmlResource()){var t=document.createElement("iframe");t.scrolling="no",this.container.append(t);var s=new XMLHttpRequest;s.open("GET",this.getHtmlResource(),!0),s.onreadystatechange=function(){4===this.readyState&&200===this.status&&(t.contentWindow.document.open(),t.contentWindow.document.write(this.responseText),t.contentWindow.document.close(),e())},s.send()}else if(!this.getStaticResource())return void console.log("Not found resource");window.addEventListener("resize",e);try{var a=fetchVAST(this.adResponse);"string"==typeof a.fileURL&&""!==a.fileURL&&this.handlePlayerOnMobile()}catch(e){}},bsmasthead.prototype.initPlayer=function(){var e=new bsplayer({wrapper:"#"+this.wrapper.id,autoplay:!1,mute:!0,reload:!0,prerolls:[{vastURL:this.options.vastURL,vastBackup:this.options.vastBackup}]});this.player=e},bsmasthead.prototype.handlePlayerOnPC=function(){this.initPlayer();var e=this.player;e.element.style.display="none";for(var t=this.adResponse.ads[0].extensions,s=t.length-1;s>=0;s--)if("configVideo"===t[s].attributes.type)var a=t[s].attributes;var i={width:a.videoWidth||"320px",height:a.videoHeight||"180px",top:a.videoTop||"15%",left:a.videoLeft||"63%"};e.element.style.width=i.width,e.element.style.height=i.height,e.element.style.top=i.top,e.element.style.left=i.left,e.on("bsplayerOnLoad",function(){this.playVideo=function(){bsmasthead.isViewable()?e.play():e.pause()};var t=window.addEventListener?"addEventListener":"attachEvent";(0,window[t])("attachEvent"==t?"onmessage":"message",function(t){t.origin===location.origin&&"bsmastheadPlayTvc"===t.data&&(e.element.style.display="block",this.playVideo(),window.addEventListener("scroll",this.playVideo))}.bind(this),!1)}),e.on("bsplayerOnComplete",function(){bsmasthead.destroy(),window.removeEventListener("scroll",this.playVideo)}),e.element.onmouseover=function(t){e.volume(.2)},e.element.onmouseout=function(t){e.volume(0)}},bsmasthead.prototype.handlePlayerOnMobile=function(){function e(){try{"landscape-primary"===screen.orientation.type&&(t.element.style.width=n[1].width,t.element.style.height=n[1].height,t.element.style.top=n[1].top,t.element.style.left=n[1].left)}catch(e){}innerWidth<innerHeight?(t.element.style.width=n[0].width,t.element.style.height=n[0].height,t.element.style.top=n[0].top,t.element.style.left=n[0].left):(t.element.style.width=n[1].width,t.element.style.height=n[1].height,t.element.style.top=n[1].top,t.element.style.left=n[1].left)}this.initPlayer();for(var t=this.player,s=this.adResponse.ads[0].extensions,a=[],i=0;i<s.length;i++)"configVideo"===s[i].attributes.type&&a.push(s[i].attributes);var n=[{width:a[0].videoWidth||"240px",height:a[0].videoHeight||"135px",top:a[0].videoTop||"10px",left:a[0].videoLeft||"35px"},{width:a[1].videoWidth||"320px",height:a[1].videoHeight||"180px",top:a[1].videoTop||"30px",left:a[1].videoLeft||"160px"}];e(),window.addEventListener("resize",e),t.on("bsplayerOnLoad",function(){this.playVideo=function(){bsmasthead.isViewable()?t.play():t.pause()},this.playVideo(),window.addEventListener("scroll",this.playVideo)}),t.on("bsplayerOnComplete",function(){bsmasthead.destroy(),window.removeEventListener("scroll",this.playVideo)})},bsmasthead.prototype.sticky=function(){var e=document.createElement("div");e.style.width="970px",e.style.height="250px",this.placeholder=e;var t=this.wrapper.getBoundingClientRect().top,s=!1;this.addStickyStyle=function(){if(window.pageYOffset>=t&&!s)bsmasthead.wrapper.classList.add("sticky"),bsmasthead.wrapper.parentNode.insertBefore(bsmasthead.placeholder,bsmasthead.wrapper),s=!0;else if(window.pageYOffset<t&&s)bsmasthead.wrapper.classList.remove("sticky"),bsmasthead.wrapper.style.left="auto",bsmasthead.wrapper.parentNode.removeChild(bsmasthead.placeholder),s=!1;else if(t<0){var e=window.getComputedStyle(bsmasthead.wrapper).getPropertyValue("margin-top");t=window.pageYOffset+bsmasthead.placeholder.getBoundingClientRect().top+parseInt(e,10)}},this.addStickyStyle(),window.addEventListener("scroll",this.addStickyStyle)},bsmasthead.prototype.tracking=function(){function e(){if(bsmasthead.isViewable()&&!i){var e=bsmasthead.adResponse.ads[0].creatives[1].variations[0].trackingEvents.creativeView;bsmasthead.track(e),i=!0}}function t(){try{var e=bsmasthead.adResponse.ads[0].creatives[1].variations[0].companionClickThroughURLTemplate}catch(e){console.log("BSD masthead: not clickThroughtURL")}bsmasthead.clickthrough(e);try{var t=bsmasthead.adResponse.ads[0].creatives[1].variations[0].companionClickTrackingURLTemplates}catch(e){bsmasthead.debug(e)}bsmasthead.track(t)}try{var s=fetchVAST(this.adResponse);if("string"==typeof s.fileURL&&""!==s.fileURL);else{var a=this.adResponse.ads[0].impressionURLTemplates;this.track(a)}}catch(e){}var i=!1;e(),window.addEventListener("scroll",e);var n=window.addEventListener?"addEventListener":"attachEvent";(0,window[n])("attachEvent"==n?"onmessage":"message",function(e){e.origin===location.origin&&"bsmastheadClickBanner"===e.data&&t()},!1);try{this.container.querySelector("img").addEventListener("click",t)}catch(e){console.log("click")}},bsmasthead.prototype.destroy=function(){this.wrapper.style.height=0,setTimeout(function(){bsmasthead.wrapper.remove()},1e3);try{this.player&&delete this.player}catch(e){this.debug(e)}try{this.placeholder&&(this.placeholder.remove(),window.removeEventListener("scroll",this.addStickyStyle))}catch(e){this.debug(e)}},bsmasthead.prototype.isViewable=function(){return this.wrapper.getBoundingClientRect().top>-125},bsmasthead.prototype.getHtmlResource=function(){try{return this.adResponse.ads[0].creatives[1].variations[0].htmlResource}catch(e){this.debug(e)}},bsmasthead.prototype.getStaticResource=function(){try{return this.adResponse.ads[0].creatives[1].variations[0].staticResource}catch(e){this.debug(e)}},bsmasthead.prototype.track=function(e){void 0!==e&&e.forEach(function(e,t){(new Image).src=e})},bsmasthead.prototype.clickthrough=function(e){var t=document.createElement("a");if(t.href=e,t.target="_blank",document.createEvent){var s=document.createEvent("MouseEvents");s.initEvent("click",!0,!0),t.dispatchEvent(s)}else window.open(e)},bsmasthead.prototype.debug=function(e){this.options.debug&&console.log(e)};var bsmasthead=new bsmasthead(bsmastheadOptions);