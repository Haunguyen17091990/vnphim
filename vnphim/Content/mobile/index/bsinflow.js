(bsinflow=function(e){e?(this.options=e,this.init()):console.log("The options is required.")}).prototype.loadPlayerLibrary=function(){return this.options.css&&this.insertCss(this.options.css),function(e,t){if(!document.getElementById(t)){var i=document.createElement("link");i.id=t,i.href=e+"?v="+(new Date).getTime(),i.type="text/css",i.rel="stylesheet",i.media="screen,print",document.head.appendChild(i)}}(this.options.playerCss||"//static.hadarone.com/ajs/outstream/bsplayer.css","bsplayerCss"),function(e,t){var i,n;if(!document.getElementById(t))return i=document.createElement("script"),i.id=t,i.type="text/javascript",i.src=e+"?v="+(new Date).getTime(),(n=document.getElementsByTagName("script")[0]).parentNode.insertBefore(i,n),i}(this.options.playerJs||"//static.hadarone.com/ajs/outstream/bsplayer.js","bsplayerJs")},bsinflow.prototype.insertCss=function(e){var t=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e)),t.appendChild(i)},bsinflow.prototype.init=function(){var e=this.loadPlayerLibrary();e.onload=e.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||VAST.get(bsinflow.options.vastURL,function(e){if(!e)return console.log("Not response"),void bsinflow.passback();if(bsinflow.adResponse=e,bsinflow.debug(e),1===e.ads[0].creatives[1].variations.length){if(ismobile.any)return;bsinflow.inflowPC()}else{if(!ismobile.any)return;bsinflow.inflowMB()}})}},bsinflow.prototype.inflowMB=function(){function e(){try{if("landscape-primary"==screen.orientation.type||"landscape-secondary"==screen.orientation.type)return o.style.width=screen.width+"px",o.style.height=screen.height+"px",c.style.display="none",d.style.display="block","IMG"===d.tagName&&(d.src=l.staticResource),void("IFRAME"===d.tagName&&(d.style.width=screen.width+"px",d.style.height=screen.height+"px"))}catch(e){}innerWidth<innerHeight?(o.style.width=screen.width+"px",o.style.height=screen.height+"px",c.style.display="block",d.style.display="none","IMG"===c.tagName&&(c.src=r.staticResource),"IFRAME"===c.tagName&&(c.style.width=screen.width+"px",c.style.height=screen.height+"px")):(o.style.width=screen.height+"px",o.style.height=screen.width+"px",c.style.display="none",d.style.display="block","IMG"===d.tagName&&(d.src=l.staticResource),"IFRAME"===d.tagName&&(d.style.width=screen.height+"px",d.style.height=screen.width+"px")),"IMG"!==c.tagName&&"IMG"!==d.tagName||(o.style.width="100%",o.style.height="100%")}function t(){innerWidth<innerHeight?g||(bsinflow.track(r.trackingEvents.creativeView),g=!0):m||(bsinflow.track(l.trackingEvents.creativeView),m=!0)}function i(){var e,t;innerWidth<innerHeight?(e=r.companionClickTrackingURLTemplates,t=r.companionClickThroughURLTemplate):(e=l.companionClickTrackingURLTemplates,t=l.companionClickThroughURLTemplate),bsinflow.track(e),bsinflow.clickthrough(t)}var n=document.createElement("div");n.id="bsinflow-wrapper",n.style.position="fixed",n.style.width="100%",n.style.height="100%",n.style.backgroundColor="rgba(0,0,0,.8)",n.style.top=0,n.style.right=0,n.style.left=0,n.style.bottom=0,n.style.zIndex=6969696969,this.wrapper=n;var o=document.createElement("div");o.id="bsinflow-container",n.appendChild(o);var s=document.createElement("div");s.id="bsinflow-signature",s.setAttribute("style","position: absolute; top: 0; left: 0; z-index: 6969; display: block; width: 20px !important; height: 20px !important; background: url(data:image/png;base64,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) no-repeat center; background-size: cover; background-color: transparent"),o.appendChild(s);var a=document.createElement("div");a.id="bsinflow-close-btn",a.innerText="×",a.setAttribute("style","position: absolute; z-index: 6969696969; top: 0; right: 0; width: 55px; height: 55px; font-size: 55px; border: 1px solid #666; border-radius: 50%; text-align: center; line-height: 1; margin: 10px 10px 0 0; color: #000"),o.appendChild(a);var r=this.adResponse.ads[0].creatives[1].variations[0],l=this.adResponse.ads[0].creatives[1].variations[1];if(r.htmlResource)(c=document.createElement("iframe")).style.overflow="hidden",c.src="about:blank",c.frameBorder=0,o.appendChild(c),window.XMLHttpRequest?ajax1=new XMLHttpRequest:ajax1=new ActiveXObject("Microsoft.XMLHTTP"),ajax1.onreadystatechange=function(){4==ajax1.readyState&&200==ajax1.status&&(iframeDoc=c.contentWindow||c.contentDocument.document,iframeDoc.document.open(),iframeDoc.document.write(ajax1.responseText),iframeDoc.document.close())},ajax1.open("GET",r.htmlResource),ajax1.send();else{if(!r.staticResource)return void console.log("Not found resource");var c=document.createElement("img");c.setAttribute("style","width: 100% !important; height: 100% !important; max-width: 100% !important; display: none"),o.appendChild(c)}if(l.htmlResource)(d=document.createElement("iframe")).style.overflow="hidden",d.src="about:blank",d.frameBorder=0,o.appendChild(d),window.XMLHttpRequest?ajax2=new XMLHttpRequest:ajax2=new ActiveXObject("Microsoft.XMLHTTP"),ajax2.onreadystatechange=function(){4==ajax2.readyState&&200==ajax2.status&&(iframeDoc=d.contentWindow||d.contentDocument.document,iframeDoc.document.open(),iframeDoc.document.write(ajax2.responseText),iframeDoc.document.close())},ajax2.open("GET",l.htmlResource),ajax2.send();else if(l.staticResource){var d=document.createElement("img");d.setAttribute("style","width: 100% !important; height: 100% !important; max-width: 100% !important; display: none"),o.appendChild(d)}else console.log("Not found resource landscape");e(),window.addEventListener("resize",e),document.body.insertBefore(n,document.body.childNodes[0]),n.addEventListener("touchmove",function(e){e.preventDefault()},!1);var p=fetchVAST(this.adResponse);if(p.fileURL&&"video/mp4"==p.mimeType&&this.handlePlayerMB(o),s.addEventListener("click",function(){window.open("http://blueseed.tv","_blank")}),a.addEventListener("click",function(){n.remove()}),!(p=fetchVAST(this.adResponse)).fileURL&&"video/mp4"!==p.mimeType)try{var h=this.adResponse.ads[0].impressionURLTemplates;this.track(h)}catch(e){console.log("Bug tracking impression")}var g=!1,m=!1;t(),window.addEventListener("orientationchange",t);var u=o.querySelectorAll("img");if(u.length>0)for(var f=0;f<u.length;f++)u[f].addEventListener("click",i);var y=window.addEventListener?"addEventListener":"attachEvent";(0,window[y])("attachEvent"==y?"onmessage":"message",function(e){e.origin===location.origin&&"bsinflowClickBanner"===e.data&&i()},!1)},bsinflow.prototype.handlePlayerMB=function(e){function t(){try{"landscape-primary"!==screen.orientation.type&&"landscape-secondary"!==screen.orientation.type||(i.element.style.left=a[1].left,i.element.style.top=a[1].top,i.element.style.width=a[1].width,i.element.style.height=a[1].height)}catch(e){}innerWidth<innerHeight?(i.element.style.left=a[0].left,i.element.style.top=a[0].top,i.element.style.width=a[0].width,i.element.style.height=a[0].height):(i.element.style.left=a[1].left,i.element.style.top=a[1].top,i.element.style.width=a[1].width,i.element.style.height=a[1].height)}var i=new bsplayer({wrapper:"#"+e.id,autoplay:!1,mute:!0,prerolls:[{vastURL:this.options.vastURL}]});i.element.controls.skip.style.display="none";for(var n=[],o=this.adResponse.ads[0].extensions,s=0;s<o.length;s++)"configVideo"===o[s].attributes.type&&n.push(o[s].attributes);var a=[{left:n[0].videoLeft||"0px",top:n[0].videoTop||"370px",width:n[0].videoWidth||"100%",height:n[0].videoHeight||"auto"},{left:n[1].videoLeft||"375px",top:n[1].videoTop||"180px",width:n[1].videoWidth||"320px",height:n[1].videoHeight||"auto"}];t(),window.addEventListener("resize",t),i.on("bsplayerOnLoad",function(){i.volume(0),i.play()}),i.on("bsplayerOnComplete",function(){bsinflow.wrapper.remove()})},bsinflow.prototype.inflowPC=function(){var e=document.createElement("div");e.id="bsinflow-wrapper",e.style.position="fixed",e.style.width="100%",e.style.height="100%",e.style.backgroundColor="rgba(0,0,0,.8)",e.style.top=0,e.style.right=0,e.style.left=0,e.style.bottom=0,e.style.zIndex=6969696969,this.wrapper=e;var t=document.createElement("div");t.id="bsinflow-container";var i=this.adResponse.ads[0].creatives[1].variations[0].width,n=this.adResponse.ads[0].creatives[1].variations[0].height;t.setAttribute("style","overflow: hidden; position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); width:"+i+"px;height:"+n+"px"),e.appendChild(t);var o=`<style type="text/css">\n    #bsinflow-signature {position: absolute;width: 18px;height: 18px;top: 0;right: 20px;padding-right: 17px;cursor: pointer;z-index: 6969696969; background: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0Mi4zNCA0Mi4zNCI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiNlNmY0ZmY7fS5jbHMtMntmaWxsOiM0ZDc3YmE7fS5jbHMtM3tmaWxsOiM3YmMxNDc7fTwvc3R5bGU+PC9kZWZzPjx0aXRsZT5Bc3NldCA0PC90aXRsZT48ZyBpZD0iTGF5ZXJfMiIgZGF0YS1uYW1lPSJMYXllciAyIj48ZyBpZD0iTGF5ZXJfMi0yIiBkYXRhLW5hbWU9IkxheWVyIDIiPjxyZWN0IGNsYXNzPSJjbHMtMSIgd2lkdGg9IjQyLjM0IiBoZWlnaHQ9IjQyLjM0Ii8+PHBvbHlnb24gY2xhc3M9ImNscy0yIiBwb2ludHM9IjkuODcgMi4xOSAxNC45NSA1LjU5IDE0Ljk1IDMwLjg5IDI5LjM0IDIzLjE4IDE3Ljc0IDE2LjczIDE3Ljc0IDEwLjk4IDM4LjY1IDIyLjgyIDkuODcgNDAuMSA5Ljg3IDIuMTkiLz48cG9seWdvbiBjbGFzcz0iY2xzLTMiIHBvaW50cz0iOS44NyAzOS4yMiA5Ljg3IDIuMTkgMTQuOTUgNS41OSAxNC45NSAzMC44OSA5Ljg3IDQwLjEgOS44NyAzOS4yMiIvPjxwb2x5Z29uIGNsYXNzPSJjbHMtMyIgcG9pbnRzPSIxMC4zNyAzLjEyIDE0LjQ1IDUuODYgMTQuNDUgMzEuNzMgMTAuMzcgMzkuMjIgMTAuMzcgMy4xMiIvPjwvZz48L2c+PC9zdmc+) no-repeat right; overflow: hidden;transition: width 0.3s ease-in-out;box-sizing: border-box;} #bsinflow-signature span {display: block;width: 87px;text-align: right;line-height: 20px;float: right;font-family: Arial;font-size: 10px;color: #464646;background: #e6f4ff;padding-right: 2px;}\n    #bsinflow-signature:hover {width: 106px;}\n    #bsinflow-close-btn:hover {background: #666 !important; color: #fff !important}\n        </style>\n        <div id="bsinflow-signature">\n            <span>Ads by <strong>Blueseed</strong></span>\n        </div>`;t.innerHTML+=o;var s=document.createElement("div");s.id="bsinflow-close-btn",s.innerText="×",s.setAttribute("style","position: absolute; width: 18px; height: 18px; right: 0; top: 0; cursor: pointer; background: #e6f4ff; text-align: center; z-index: 6969696969; z-index: 6969696969696968; font-family: Arial; cursor: pointer; line-height: .7; color: green; font-size: x-large"),t.appendChild(s);var a=document.createElement("div");a.id="bsinflow-banner",a.style.cursor="pointer",t.appendChild(a);try{var r=this.adResponse.ads[0].creatives[1].variations[0].htmlResource,l=this.adResponse.ads[0].creatives[1].variations[0].staticResource}catch(e){return void console.log("Can not get resource")}if(r)console.log("Not support inflow HTML");else if(l){var c=document.createElement("img");c.style.width="100%",c.style.height="100%",c.src=l,a.appendChild(c),document.body.insertBefore(e,document.body.childNodes[0]);var d=fetchVAST(this.adResponse);if(d.fileURL&&"video/mp4"==d.mimeType&&this.handlePlayerPC(t),s.addEventListener("click",function(){e.remove()}),(o=t.querySelector("#bsinflow-signature")).addEventListener("click",function(){window.open("http://blueseed.tv","_blank")}),!(d=fetchVAST(this.adResponse)).fileURL&&"video/mp4"!==d.mimeType)try{var p=this.adResponse.ads[0].impressionURLTemplates;this.track(p)}catch(e){return void console.log("Bug tracking impressions")}var h=!1;!function(){if(!h)try{var e=bsinflow.adResponse.ads[0].creatives[1].variations[0].trackingEvents.creativeView;bsinflow.track(e)}catch(e){console.log("Bug tracking viewable")}}(),a.addEventListener("click",function(){try{var e={clickthroughURL:bsinflow.adResponse.ads[0].creatives[1].variations[0].companionClickThroughURLTemplate,clickTrackingURLs:bsinflow.adResponse.ads[0].creatives[1].variations[0].companionClickTrackingURLTemplates};bsinflow.clickthrough(e.clickthroughURL),bsinflow.track(e.clickTrackingURLs)}catch(e){console.log("Bug tracking click"),console.log(e)}})}else console.log("Resource not found")},bsinflow.prototype.handlePlayerPC=function(e){var t=new bsplayer({wrapper:"#"+e.id,autoplay:!1,mute:!0,prerolls:[{vastURL:this.options.vastURL}]});t.element.controls.skip.style.display="none";for(var i=this.adResponse.ads[0].extensions,n=0;n<i.length;n++)if("configVideo"==i[n].attributes.type)var o=i[n].attributes;var s={left:o.videoLeft||"77px",top:o.videoTop||"70px",width:o.videoWidth||"640px",height:o.videoHeight||"360px"};t.element.style.left=s.left,t.element.style.top=s.top,t.element.style.width=s.width,t.element.style.height=s.height,t.on("bsplayerOnLoad",function(){t.volume(0),t.play(),this.onmouseover=function(){t.volume(.2)},this.onmouseout=function(){t.volume(0)}}),t.on("bsplayerOnComplete",function(){bsinflow.wrapper.remove()})},bsinflow.prototype.clickthrough=function(e){var t=document.createElement("a");if(t.href=e,t.target="_blank",document.createEvent){var i=document.createEvent("MouseEvents");i.initEvent("click",!0,!0),t.dispatchEvent(i)}else window.open(e)},bsinflow.prototype.track=function(e){void 0!==e&&e.forEach(function(e,t){(new Image).src=e})},bsinflow.prototype.debug=function(e){this.options.debug&&console.log(e)},bsinflow.prototype.passback=function(){"function"==typeof window.passbackHadarPlacement&&(window.passbackHadarPlacement(this.options.placementId),console.log("call passback"))};var bsinflow=new bsinflow(bsinflowOptions);